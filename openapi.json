{"openapi":"3.1.0","info":{"title":"RaceSight Intelligence API","description":"Horse Racing Analytics & Betting Intelligence Platform","version":"2.0.0"},"paths":{"/horse/analyze":{"post":{"tags":["horse-racing"],"summary":"Analyze Race","description":"Analyze a race. If horses are provided, it uses those. \nOtherwise, it could look up the race info if track and number are provided.","operationId":"analyze_race_horse_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RaceInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisOutput"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/analyze/live":{"get":{"tags":["horse-racing"],"summary":"Analyze Live Race","description":"Fetch live race data from the web and analyze it.","operationId":"analyze_live_race_horse_analyze_live_get","parameters":[{"required":true,"schema":{"type":"string","title":"Track"},"name":"track","in":"query"},{"required":true,"schema":{"type":"integer","title":"Race Number"},"name":"race_number","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisOutput"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/calendar":{"get":{"tags":["horse-racing"],"summary":"Get Major Calendar","description":"Retrieve the upcoming Group & Listed races from official sources.","operationId":"get_major_calendar_horse_calendar_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/horse/bookmakers":{"get":{"tags":["horse-racing"],"summary":"Get Bookmakers","description":"Get the list of recommended bookmakers.","operationId":"get_bookmakers_horse_bookmakers_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/horse/tracks":{"get":{"tags":["horse-racing"],"summary":"Get Active Tracks","description":"Automatically discover and return active/upcoming tracks.","operationId":"get_active_tracks_horse_tracks_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/horse/status":{"get":{"tags":["horse-racing"],"summary":"Get Track Schedule","description":"Get today's race schedule (Global or specific track).","operationId":"get_track_schedule_horse_status_get","parameters":[{"required":false,"schema":{"type":"string","title":"Track"},"name":"track","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/schedule":{"get":{"tags":["horse-racing"],"summary":"Get Track Schedule Alias","description":"Compatibility alias for the RaceSight UI.\n\nThe frontend calls `/horse/schedule`; historically this route was named `/horse/status`.","operationId":"get_track_schedule_alias_horse_schedule_get","parameters":[{"required":false,"schema":{"type":"string","title":"Track"},"name":"track","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/guide":{"get":{"tags":["horse-racing"],"summary":"Get Race Guide","description":"Get the field/horses for a race without analysis.\n\nAccepts either (track, race_number) OR a direct betting site URL via `url`.","operationId":"get_race_guide_horse_guide_get","parameters":[{"required":false,"schema":{"type":"string","title":"Track"},"name":"track","in":"query"},{"required":false,"schema":{"type":"integer","title":"Race Number"},"name":"race_number","in":"query"},{"required":false,"schema":{"type":"string","title":"Url"},"name":"url","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/learn/race-result":{"post":{"tags":["horse-racing"],"summary":"Submit Race Result","description":"Submit actual race result for AI learning\n\nBody format:\n{\n    \"race_id\": \"flemington_r1_20260110\",\n    \"track\": \"Flemington\",\n    \"distance\": 1200,\n    \"track_condition\": \"Good 4\",\n    \"results\": [\n        {\"horse_name\": \"Horse A\", \"finish_position\": 1, \"starting_price\": 3.50, ...}\n    ]\n}","operationId":"submit_race_result_horse_learn_race_result_post","requestBody":{"content":{"application/json":{"schema":{"type":"object","title":"Race Result"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/ai/horse-intelligence/{horse_name}":{"get":{"tags":["horse-racing"],"summary":"Get Horse Ai Intelligence","description":"Get AI learned intelligence for a specific horse","operationId":"get_horse_ai_intelligence_horse_ai_horse_intelligence__horse_name__get","parameters":[{"required":true,"schema":{"type":"string","title":"Horse Name"},"name":"horse_name","in":"path"},{"required":false,"schema":{"type":"string","title":"Track Condition"},"name":"track_condition","in":"query"},{"required":false,"schema":{"type":"integer","title":"Distance"},"name":"distance","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/ai/learning-dashboard":{"get":{"tags":["horse-racing"],"summary":"Get Ai Learning Dashboard","description":"Get AI learning status and statistics","operationId":"get_ai_learning_dashboard_horse_ai_learning_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/horse/ai/horse-history/{horse_name}":{"get":{"tags":["horse-racing"],"summary":"Get Horse History","description":"Get historical race results for a horse","operationId":"get_horse_history_horse_ai_horse_history__horse_name__get","parameters":[{"required":true,"schema":{"type":"string","title":"Horse Name"},"name":"horse_name","in":"path"},{"required":false,"schema":{"type":"integer","title":"Limit","default":20},"name":"limit","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/next-to-jump":{"get":{"tags":["horse-racing"],"summary":"Get Next To Jump","description":"Get the Next to Jump races with live countdown.\n\nIMPORTANT: This endpoint backs the RaceSight UI. It must return actionable, provider-backed\nupcoming races (not generic web-search results).","operationId":"get_next_to_jump_horse_next_to_jump_get","parameters":[{"required":false,"schema":{"type":"string","title":"Race Types","default":"horse,greyhound,harness"},"name":"race_types","in":"query"},{"required":false,"schema":{"type":"integer","title":"Limit","default":15},"name":"limit","in":"query"},{"required":false,"schema":{"type":"boolean","title":"Force Refresh","default":false},"name":"force_refresh","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/live/schedule":{"get":{"tags":["horse-racing"],"summary":"Get Live Schedule","description":"Aggregate live schedule from configured providers and return canonical RaceSummary list.","operationId":"get_live_schedule_horse_live_schedule_get","parameters":[{"required":false,"schema":{"type":"string","title":"Race Types","default":"horse,greyhound,harness"},"name":"race_types","in":"query"},{"required":false,"schema":{"type":"integer","title":"Limit","default":100},"name":"limit","in":"query"},{"required":false,"schema":{"type":"boolean","title":"Force Refresh","default":false},"name":"force_refresh","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/sse/schedules":{"get":{"tags":["horse-racing"],"summary":"Sse Schedules","description":"Server-Sent Events endpoint streaming live schedule updates.","operationId":"sse_schedules_horse_sse_schedules_get","parameters":[{"required":false,"schema":{"type":"string","title":"Race Types","default":"horse,greyhound,harness"},"name":"race_types","in":"query"},{"required":false,"schema":{"type":"integer","title":"Limit","default":100},"name":"limit","in":"query"},{"required":false,"schema":{"type":"integer","title":"Poll Interval","default":10},"name":"poll_interval","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/providers/status":{"get":{"tags":["horse-racing"],"summary":"Providers Status","description":"Return provider health statuses and last schedule warnings","operationId":"providers_status_horse_providers_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/horse/provider-status":{"get":{"tags":["horse-racing"],"summary":"Providers Status Alias","description":"Compatibility alias (some clients try this path).","operationId":"providers_status_alias_horse_provider_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/horse/predictions/top-picks":{"get":{"tags":["horse-racing"],"summary":"Predictions Top Picks","description":"Return the top AI pick for upcoming races (provider-backed where possible).","operationId":"predictions_top_picks_horse_predictions_top_picks_get","parameters":[{"required":false,"schema":{"type":"integer","title":"Limit","default":15},"name":"limit","in":"query"},{"required":false,"schema":{"type":"string","title":"Race Types","default":"horse,greyhound,harness"},"name":"race_types","in":"query"},{"required":false,"schema":{"type":"boolean","title":"Include Sentiment","default":false},"name":"include_sentiment","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/debug/external-ip":{"get":{"tags":["horse-racing"],"summary":"Debug External Ip","description":"Return the public IP seen by external services (useful to verify VPN/proxy).","operationId":"debug_external_ip_horse_debug_external_ip_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/horse/race/{race_id}/runners":{"get":{"tags":["horse-racing"],"summary":"Get Race Runners Detailed","description":"Get all runners for a race with Win/Place odds and analysis.\n\nSupports provider-prefixed race ids, e.g.:\n  - palmerbet:12345\n  - racingcom:abc\n  - tab:xyz\n\nBackward compatible: if no prefix is provided, defaults to Palmerbet.","operationId":"get_race_runners_detailed_horse_race__race_id__runners_get","parameters":[{"required":true,"schema":{"type":"string","title":"Race Id"},"name":"race_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/horse/analyze/by-id":{"get":{"tags":["horse-racing"],"summary":"Analyze Race By Id","description":"Analyze a race using a provider-backed race_id.\n\nThis is the preferred \"Predictions\" path because it is derived from real bookmaker/provider data\nrather than broad web search.","operationId":"analyze_race_by_id_horse_analyze_by_id_get","parameters":[{"required":true,"schema":{"type":"string","title":"Race Id"},"name":"race_id","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisOutput"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AnalysisOutput":{"properties":{"race_summary":{"type":"object","title":"Race Summary"},"horse_rankings":{"items":{"$ref":"#/components/schemas/HorseRanking"},"type":"array","title":"Horse Rankings"},"betting_advice":{"type":"string","title":"Betting Advice","default":"No advice available"},"market_movers":{"items":{"type":"object"},"type":"array","title":"Market Movers","default":[]},"scratched_horses":{"items":{"type":"string"},"type":"array","title":"Scratched Horses","default":[]},"market_insight":{"type":"object","title":"Market Insight","default":{}},"best_bet_indicator":{"type":"object","title":"Best Bet Indicator","default":{}},"ai_reasoning_log":{"items":{"type":"string"},"type":"array","title":"Ai Reasoning Log","default":[]},"disclaimer":{"type":"string","title":"Disclaimer","default":"Informational only. No guarantee of outcome. Always gamble responsibly."}},"type":"object","required":["race_summary","horse_rankings"],"title":"AnalysisOutput"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HorseInput":{"properties":{"name":{"type":"string","title":"Name"},"recent_form_score":{"type":"number","title":"Recent Form Score","default":0.0},"speed_figure":{"type":"number","title":"Speed Figure","default":0.0},"odds_trend":{"type":"string","title":"Odds Trend","default":"neutral"},"is_favourite":{"type":"boolean","title":"Is Favourite","default":false}},"type":"object","required":["name"],"title":"HorseInput"},"HorseRanking":{"properties":{"name":{"type":"string","title":"Name"},"likelihood":{"type":"string","title":"Likelihood"},"analytic_score":{"type":"integer","title":"Analytic Score"},"confidence":{"type":"string","title":"Confidence"},"odds_trend":{"type":"string","title":"Odds Trend"},"key_reasons":{"items":{"type":"string"},"type":"array","title":"Key Reasons"},"career_stats":{"type":"object","title":"Career Stats"},"insights":{"items":{"type":"string"},"type":"array","title":"Insights"}},"type":"object","required":["name","likelihood","analytic_score","confidence","odds_trend","key_reasons"],"title":"HorseRanking"},"RaceInput":{"properties":{"race_name":{"type":"string","title":"Race Name"},"race_number":{"type":"integer","title":"Race Number"},"track":{"type":"string","title":"Track"},"conditions":{"type":"string","title":"Conditions"},"classification":{"type":"string","title":"Classification","default":"Handicap"},"prizemoney":{"type":"string","title":"Prizemoney","default":"Unknown"},"horses":{"items":{"$ref":"#/components/schemas/HorseInput"},"type":"array","title":"Horses"}},"type":"object","required":["race_name","track","horses"],"title":"RaceInput"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}